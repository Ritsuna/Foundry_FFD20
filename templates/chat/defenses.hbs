<div class="ffd20 chat-card defense-card" data-actor-id="{{actor.id}}"{{#if tokenUuid}} data-token-uuid="{{tokenUuid}}"{{/if}}>
  <header class="card-header flexrow">
    <h3 class="actor-name">{{name}} - {{localize "FFD20.Defenses"}}</h3>
  </header>

  <div>
    {{#if ac}}
    <div class="defense ac">
      <table>
        <thead>
          <tr>
            <th>{{localize "FFD20.ACNormal"}}</th>
            <th>{{localize "FFD20.ACTouch"}}</th>
            <th>{{localize "FFD20.ACFlatFooted"}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ac.normal}}</td>
            <td>{{ac.touch}}</td>
            <td>{{ac.flatFooted}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    {{#if ac.notes}}
    <div class="flexcol property-group">
      <label>{{localize "FFD20.ACNotes"}}</label>
      <div class="flexrow">
        {{#each ac.notes as |v|}}
        <span class="tag">{{{v}}}</span>
        {{/each}}
      </div>
    </div>
    {{/if}}
    {{/if}}

    {{#if cmd}}
    <div class="defense cmd">
      <table>
        <thead>
          <tr>
            <th>{{localize "FFD20.CMDAbbr"}}</th>
            <th>{{localize "FFD20.CMDFlatFooted"}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{cmd.normal}}</td>
            <td>{{cmd.flatFooted}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    {{#if cmd.notes}}
    <div class="flexcol property-group">
      <label>{{localize "FFD20.CMDNotes"}}</label>
      <div class="flexrow">
        {{#each cmd.notes as |v|}}
        <span class="tag">{{{v}}}</span>
        {{/each}}
      </div>
    </div>
    {{/if}}
    {{/if}}

    {{#if (or misc.sr misc.srNotes.length)}}
    <div class="defense misc">
      <table>
        <thead>
          <tr>
            <th>{{localize "FFD20.SpellResistance"}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{misc.sr}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    {{#if misc.srNotes}}
    <div class="flexcol property-group">
      <label>{{localize "FFD20.SpellResistanceNotes"}}</label>
      <div class="flexrow">
        {{#each misc.srNotes as |v|}}
        <span class="tag">{{{v}}}</span>
        {{/each}}
      </div>
    </div>
    {{/if}}
    {{/if}}

    {{#if misc.drNotes}}
    <div class="flexcol property-group">
      <label>{{localize "FFD20.DamRed"}}</label>
      <div class="flexrow">
        {{#each misc.drNotes as |v|}}
        <span class="tag">{{{v}}}</span>
        {{/each}}
      </div>
    </div>
    {{/if}}

    {{#if misc.energyResistance}}
    <div class="flexcol property-group">
      <label>{{localize "FFD20.EnRes"}}</label>
      <div class="flexrow">
        {{#each misc.energyResistance as |v|}}
        <span class="tag">{{{v}}}</span>
        {{/each}}
      </div>
    </div>
    {{/if}}

    {{#if regen}}
    <div class="defense regen">
      <table>
        <thead>
          <tr>
            <th>{{localize "FFD20.Regeneration"}}</th>
            <th>{{localize "FFD20.FastHealing"}}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{#if regen.regen}}{{regen.regen}}{{else}}{{localize "FFD20.NonApplicable"}}{{/if}}</td>
            <td>{{#if regen.fastHealing}}{{regen.fastHealing}}{{else}}{{localize "FFD20.NonApplicable"}}{{/if}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    {{/if}}

    <div class="saving-throws flexrow">
      <button data-action="defense-save" data-save="fort">{{localize "FFD20.SavingThrowFort"}}</button>
      <button data-action="defense-save" data-save="ref">{{localize "FFD20.SavingThrowRef"}}</button>
      <button data-action="defense-save" data-save="will">{{localize "FFD20.SavingThrowWill"}}</button>
    </div>
  </div>
</div>
